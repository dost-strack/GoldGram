<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoldGram</title>
<style>
body {
  margin:0; height:100vh; font-family: Arial, Helvetica, sans-serif;
  background: linear-gradient(135deg, #fff8e0, #ffe066);
  display:flex; justify-content:center; align-items:center;
}
.loginCard, .appContainer {
  background: linear-gradient(180deg,#fff8d1,#fff7d6);
  border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.2);
  border:2px solid rgba(255,215,0,0.7);
}
.loginCard {
  width:320px; text-align:center; padding:40px;
}
.loginCard h1 { color:#7a5a00; text-shadow:0 0 4px #fff; margin-bottom:20px; }
.loginCard input { width:100%; padding:12px; margin:10px 0; border-radius:12px; border:1px solid #e6d79a; font-size:16px; }
.loginCard button { width:100%; padding:12px; margin-top:10px; border-radius:12px; border:none; background:linear-gradient(135deg,#ffd700,#ffec8b); color:#fff; font-weight:bold; cursor:pointer; font-size:16px; box-shadow:0 0 12px rgba(255,215,0,0.5); transition:.3s; }
.loginCard button:hover { box-shadow:0 0 18px rgba(255,215,0,0.8); transform:translateY(-2px); }
#recaptcha { margin-top:15px; }

.appContainer { display:flex; width:980px; height:640px; gap:20px; display:none; }
.sidebar { width:280px; background:#fffdf5; border-radius:16px; display:flex; flex-direction:column; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
.brand { padding:16px; display:flex; align-items:center; gap:12px; border-bottom:2px solid rgba(255,215,0,0.5); }
.brand .logo { width:40px; height:40px; border-radius:12px; background:linear-gradient(135deg,#ffdd55,#ffd700); display:flex; align-items:center; justify-content:center; font-weight:700; color:#fff; box-shadow:0 0 8px rgba(255,215,0,0.5); }
.brand h1 { margin:0; font-size:18px; color:#7a5a00; }
.contactsWrap { flex:1; overflow:auto; padding:10px; }
.addContact { display:flex; flex-direction:column; padding:10px; gap:6px; }
.addContact input { padding:8px; border-radius:10px; border:1px solid #e6d79a; }
.smallBtn { padding:8px; border-radius:12px; border:none; background:linear-gradient(135deg,#ffd700,#ffec8b); color:#fff; cursor:pointer; font-weight:700; transition:.2s; }
.smallBtn:hover { box-shadow:0 0 12px rgba(255,215,0,0.7); transform:translateY(-2px); }
.contact { display:flex; align-items:center; gap:10px; padding:8px; border-radius:10px; margin-bottom:6px; cursor:pointer; transition:.2s; }
.contact:hover { background:rgba(255,215,0,0.15); }
.avatarSmall { width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,#ffd86b,#ffd14a); display:flex; align-items:center; justify-content:center; font-weight:700; color:#4d3b00; box-shadow:0 0 6px rgba(255,215,0,0.5); }
.contactName { font-weight:700; color:#4d3b00; }
.contactPhone { font-size:12px; color:#7a5a00; }

.main { flex:1; display:flex; flex-direction:column; background:#fffdf5; border-radius:16px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
.header { padding:14px; border-bottom:2px solid rgba(255,215,0,0.5); display:flex; align-items:center; justify-content:space-between; background:linear-gradient(90deg,#fff8d0,#fff6b3); }
.header .title { font-weight:700; color:#7a5a00; }
.chatArea { flex:1; padding:12px; display:flex; flex-direction:column; gap:10px; overflow:hidden; }
#messages { flex:1; overflow:auto; padding:10px; border-radius:12px; background:linear-gradient(180deg,#fff7d6,#fff8df); }
.msg { display:inline-block; padding:10px 14px; border-radius:14px; margin:6px 0; max-width:72%; }
.msg.me { background:linear-gradient(135deg,#ffe066,#ffd700); color:#4d3b00; margin-left:auto; font-weight:700; box-shadow:0 0 10px rgba(255,215,0,0.5); }
.msg.other { background:#fff2b3; color:#4d3b00; box-shadow:0 0 8px rgba(255,215,0,0.3); }
.composer { display:flex; gap:8px; padding:10px; border-top:1px solid rgba(255,215,0,0.3); align-items:center; display:none; }
.composer input[type="text"] { flex:1; padding:10px; border-radius:14px; border:2px solid #e5c770; background:#fffdf5; outline:none; }
.composer button { padding:10px 14px; border-radius:14px; border:none; background:linear-gradient(135deg,#ffd700,#ffec8b); color:#fff; font-weight:700; cursor:pointer; }

</style>
</head>
<body>

<!-- Экран входа -->
<div class="loginCard" id="loginCard">
  <h1>GoldGram</h1>
  <input type="text" id="phoneInput" placeholder="+998901234567">
  <input type="text" id="smsInput" placeholder="Код из SMS">
  <button id="sendCodeBtn">Отправить код</button>
  <button id="confirmBtn">Войти</button>
  <div id="recaptcha"></div>
</div>

<!-- Основной интерфейс -->
<div class="appContainer" id="appContainer">
  <div class="sidebar">
    <div class="brand">
      <div class="logo">G</div>
      <h1>GoldGram</h1>
    </div>
    <div class="contactsWrap" id="contactsList"></div>
    <div class="addContact" id="addContactBlock">
      <input id="addPhone" placeholder="+998901234567">
      <input id="addName" placeholder="Имя">
      <button id="addContactBtn" class="smallBtn">Добавить контакт</button>
    </div>
  </div>
  <div class="main">
    <div class="header">
      <div class="title" id="chatTitle">Выберите контакт</div>
    </div>
    <div class="chatArea">
      <div id="messages"></div>
      <div class="composer" id="composer">
        <input type="text" id="messageInput" placeholder="Написать сообщение...">
        <button id="sendBtn">Отправить</button>
      </div>
    </div>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Настройки Firebase
const firebaseConfig = {
  apiKey: "ТВОЙ_API_KEY",
  authDomain: "ТВОЙ_AUTH_DOMAIN",
  databaseURL: "ТВОЙ_DATABASE_URL",
  projectId: "ТВОЙ_PROJECT_ID",
  storageBucket: "ТВОЙ_STORAGE_BUCKET",
  messagingSenderId: "ТВОЙ_SENDER_ID",
  appId: "ТВОЙ_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

let currentUser = null;
let selectedContact = null;

// reCAPTCHA
window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {
  'size': 'normal',
  'callback': () => { console.log('reCAPTCHA подтверждён'); }
});
recaptchaVerifier.render();

// Отправка кода
let confirmationResult;
document.getElementById('sendCodeBtn').onclick = () => {
  const phone = document.getElementById('phoneInput').value;
  auth.signInWithPhoneNumber(phone, window.recaptchaVerifier)
    .then((result) => {
      confirmationResult = result;
      alert('Код отправлен на ' + phone);
    })
    .catch(error => alert(error.message));
};

// Подтверждение кода
document.getElementById('confirmBtn').onclick = () => {
  const code = document.getElementById('smsInput').value;
  if (!confirmationResult) return alert('Сначала отправьте код');
  confirmationResult.confirm(code)
    .then((result) => {
      currentUser = result.user;
      alert('Вход выполнен: ' + currentUser.phoneNumber);
      document.getElementById('loginCard').style.display = 'none';
      document.getElementById('appContainer').style.display = 'flex';
      document.getElementById('contactsList').style.display = 'block';
      document.getElementById('addContactBlock').style.display = 'flex';
      document.getElementById('composer').style.display = 'flex';
    })
    .catch(error => alert('Неверный код: ' + error.message));
};

// Добавление контакта
document.getElementById('addContactBtn').onclick = () => {
  const phone = document.getElementById('addPhone').value;
  const name = document.getElementById('addName').value || phone;
  if (!phone) return;
  const contactDiv = document.createElement('div');
  contactDiv.className = 'contact';
  contactDiv.innerHTML = `<div class="avatarSmall">${name[0]}</div><div><div class="contactName">${name}</div><div class="contactPhone">${phone}</div></div>`;
  contactDiv.onclick = () => selectContact({phone, name});
  document.getElementById('contactsList').appendChild(contactDiv);
};

// Выбор контакта
function selectContact(contact) {
  selectedContact = contact;
  document.getElementById('chatTitle').innerText = contact.name;
  document.getElementById('messages').innerHTML = '';
}

// Отправка сообщения
document.getElementById('sendBtn').onclick = () => {
  const text = document.getElementById('messageInput').value;
  if (!text || !selectedContact) return;
  const msgDiv = document.createElement('div');
  msgDiv.className = 'msg me';
  msgDiv.innerText = text;
  document.getElementById('messages').appendChild(msgDiv);
  document.getElementById('messageInput').value = '';
};
</script>
</body>
</html>


